<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DonorMedix · Messages</title>
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-900 min-h-screen flex items-center justify-center">

  <div class="w-full max-w-[1100px] h-[600px] bg-white rounded-2xl shadow-2xl overflow-hidden flex">

    <!-- LEFT MENU (CURRENT USER PROFILE) -->
    <aside class="w-[230px] bg-slate-950 text-slate-100 flex flex-col gap-4 px-4 py-4">

      <!-- Avatar (current user) — settings DROPDOWN text only now -->
      <details id="settingsDropdown" class="group">
        <summary class="flex items-center gap-3 cursor-pointer px-1 py-1 rounded-full hover:bg-slate-900 list-none">
          <div class="w-11 h-11 rounded-full overflow-hidden border-2 border-sky-400 flex-shrink-0">
            <!-- Will be replaced by currentUserProfile.photoURL in message.js -->
            <img
              id="sidebarAvatar"
              src="https://i.pravatar.cc/150?img=3"
              alt="Avatar"
              class="w-full h-full object-cover"
            >
          </div>
          <div class="flex flex-col">
            <!-- Will be replaced by currentUserProfile.displayName in message.js -->
            <span id="sidebarName" class="text-sm font-semibold">Justinnpo</span>
          </div>
        </summary>
      </details>

      <!-- Menu -->
      <div class="mt-4">
        <h3 class="text-[11px] uppercase tracking-[0.18em] text-slate-500 mb-2 px-1">Menu</h3>
        <nav class="flex flex-col gap-2 text-sm">
          <button
            id="btnAllChats"
            class="flex items-center gap-2 px-2 py-2 rounded-xl bg-slate-900"
          >
            <span>All Chats</span>
          </button>

          <!-- Profile button -->
          <button
            id="btnProfileNav"
            class="flex items-center gap-2 px-2 py-2 rounded-xl hover:bg-slate-900 text-xs text-slate-100"
          >
            <div class="w-7 h-7 rounded-full bg-slate-800 flex items-center justify-center text-[11px] text-slate-100 font-semibold shadow">
              P
            </div>
            <span class="truncate">Profile</span>
          </button>

          <!-- Settings button -->
          <button
            id="btnSettingsNav"
            class="flex items-center gap-2 px-2 py-2 rounded-xl hover:bg-slate-900 text-xs text-slate-100"
          >
            <div class="w-7 h-7 rounded-full bg-slate-800 flex items-center justify-center text-[11px] text-slate-100 font-semibold shadow">
              S
            </div>
            <span class="truncate">Settings</span>
          </button>
        </nav>

        <!-- SETTINGS CONTENT -->
        <div
          id="settingsCardContainer"
          class="hidden mt-3 bg-zinc-900/95 border border-zinc-800 rounded-xl py-2 space-y-1 shadow-2xl"
        >
          <button class="w-full text-left px-4 py-2 text-xs text-slate-100 hover:bg-zinc-800">
            Preferences
          </button>
          <button class="w-full text-left px-4 py-2 text-xs text-slate-100 hover:bg-zinc-800">
            Edit username
          </button>
          <button class="w-full text-left px-4 py-2 text-xs text-slate-100 hover:bg-zinc-800">
            Restricted accounts
          </button>
          <button class="w-full text-left px-4 py-2 text-xs text-slate-100 hover:bg-zinc-800">
            Privacy &amp; safety
          </button>
          <div class="h-px bg-zinc-800 my-1"></div>
          <button class="w-full text-left px-4 py-2 text-xs text-rose-400 hover:bg-zinc-800">
            Log out
          </button>
        </div>
      </div>
    </aside>

    <!-- ALL CHATS LIST -->
    <section
      id="allChatsSection"
      class="w-[260px] border-r border-slate-200 bg-slate-50 flex flex-col hidden"
    >
      <div class="px-4 py-3 border-b border-slate-200 flex items-center justify-between">
        <h2 class="text-lg font-semibold text-slate-900">All Chats</h2>
      </div>

      <div class="px-4 py-3">
        <div class="bg-white rounded-2xl border border-slate-200 flex items-center px-3 py-2 shadow-sm">
          <input
            id="chatSearch"
            type="text"
            placeholder="Search chats..."
            class="w-full text-sm outline-none bg-transparent text-slate-800 placeholder:text-slate-400"
          />
        </div>
      </div>

      <div id="chatList" class="flex-1 overflow-y-auto px-3 pb-4 space-y-2">
        <!-- JS will render conversation list here -->
      </div>
    </section>

    <!-- MAIN CHAT -->
    <main class="flex-1 flex flex-col bg-slate-100">

      <!-- HEADER (filled by JS) -->
      <header class="flex items-center justify-between px-4 py-3 bg-white border-b border-slate-200">
        <div class="flex items-center gap-3">
          <!-- Avatar of other user or group icon -->
          <img
            id="headerAvatar"
            src="https://i.pravatar.cc/150?img=32"
            alt="Chat avatar"
            class="w-10 h-10 rounded-full object-cover shadow"
          />
          <div class="flex flex-col">
            <!-- Name: other user OR group name -->
            <span id="headerName" class="text-sm font-semibold text-slate-900">Chat</span>
            <!-- Status: “Online” or "Active X min ago" -->
            <span id="headerStatus" class="text-xs text-emerald-500">Online</span>
            <!-- Subtitle: donation/request context -->
            <span id="chatSubtitle" class="text-[11px] text-slate-500">Direct chat</span>
          </div>
        </div>

        <div class="flex items-center gap-2 text-slate-700">
          <button class="flex items-center justify-center w-8 h-8 rounded-full hover:bg-slate-100">
            <svg class="w-4 h-4 text-slate-700" viewBox="0 0 24 24" fill="none"
                 stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="6.5" cy="12" r=".9" />
              <circle cx="12" cy="12" r=".9" />
              <circle cx="17.5" cy="12" r=".9" />
            </svg>
          </button>
        </div>
      </header>

      <!-- MESSAGES LIST: EMPTY BY DEFAULT, ONLY REAL MESSAGES FROM JS -->
      <section
        id="messages"
        class="flex-1 overflow-y-auto px-6 py-6 space-y-4"
      >
        <!-- JS renders messages here -->
      </section>

      <!-- INPUT BAR -->
      <footer class="px-4 py-3 bg-white border-t border-slate-200 flex items-center gap-3">
        <!-- Image button -->
        <button
          id="imageBtn"
          class="flex items-center justify-center w-9 h-9 rounded-lg hover:bg-slate-100"
        >
          <svg class="w-5 h-5 text-slate-600" viewBox="0 0 24 24" fill="none"
               stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="3" width="18" height="18" rx="3" />
            <circle cx="8.5" cy="8.5" r="2.5" />
            <path d="M21 15l-3.5-3.5a2 2 0 0 0-3 0L9 17" />
          </svg>
        </button>

        <!-- Camera button -->
        <button
          id="cameraBtn"
          class="flex items-center justify-center w-9 h-9 rounded-lg hover:bg-slate-100"
        >
          <svg class="w-5 h-5 text-slate-600" viewBox="0 0 24 24" fill="none"
               stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 9.5a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7z" />
            <path d="M5 7h2l1-2h8l1 2h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2z" />
          </svg>
        </button>

        <!-- Textarea -->
        <textarea
          id="messageInput"
          rows="1"
          placeholder="Type a message..."
          class="flex-1 resize-none text-sm px-3 py-2 border border-slate-300 rounded-lg outline-none focus:ring-2 focus:ring-sky-400 focus:border-sky-400"
        ></textarea>

        <!-- Send button -->
        <button
          id="sendBtn"
          class="px-4 py-2 rounded-lg bg-sky-500 text-white text-xs font-semibold shadow hover:bg-sky-600 hover:shadow-lg transition"
        >
          Send
        </button>
      </footer>

    </main>
  </div>

  <!-- Connect JS -->
  <script type="module" src="message.js"></script>
</body>
</html>
